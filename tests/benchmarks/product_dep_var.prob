
f = 0
x = 0
y = 0
p = 0
while true:
    f = Bernoulli(1/2)
    x = x + f
    y = y + 1 - f
    p = x*y
end

#test: p; p; 0; n*(n - 1)/4
#test: p**2; p; 0; n*(n**3 - 2*n**2 + 3*n - 2)/16
#test: p**3; p; 0; n*(n**5 - 3*n**4 + 9*n**3 - 21*n**2 + 30*n - 16)/64
